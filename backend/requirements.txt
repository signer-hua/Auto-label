# ==============================================================================
# Auto-label 后端依赖（安装顺序已严格排列，直接 pip install -r 即可）
# ==============================================================================
#
# 重要：以下依赖必须在 PyTorch 和 MMCV 安装之后再安装。
# 请按此顺序操作：
#
#   步骤0: 安装 PyTorch（根据你的 CUDA 版本选择）
#     pip install torch torchvision --index-url https://download.pytorch.org/whl/cu121
#
#   步骤1: 安装 MMCV 生态（必须用 openmim，不能直接 pip install）
#     pip install openmim
#     mim install mmengine>=0.10.3
#     mim install mmcv==2.0.0
#     mim install mmdet>=3.0.0
#     mim install mmyolo>=0.6.0
#
#   步骤2: 安装本文件中的依赖
#     pip install -r backend/requirements.txt
#
#   步骤3: 安装内置算法库
#     pip install -e backend/libs/dinov3
#     pip install -e backend/libs/sam3
#     pip install -e backend/libs/yolo_world
#
# ==============================================================================

# ==================== 1. 基础工具（无冲突，最先装） ====================
numpy>=1.26.0,<2
typing_extensions
tqdm

# ==================== 2. 图像处理 ====================
Pillow>=10.0.0
opencv-python-headless>=4.9.0
scipy>=1.12.0

# ==================== 3. FastAPI 框架 ====================
fastapi>=0.104.0
uvicorn[standard]>=0.30.0
python-multipart>=0.0.9
pydantic>=2.0.0

# ==================== 4. Celery 异步任务队列 + Redis ====================
celery[redis]>=5.3.0
redis>=5.0.0

# ==================== 5. 机器学习通用 ====================
# 注意：torch 和 torchvision 必须提前通过步骤0安装，此处仅声明依赖
scikit-learn>=1.4.0

# ==================== 6. DINOv3 依赖 ====================
omegaconf
ftfy
regex

# ==================== 7. SAM3 依赖 ====================
timm>=1.0.17
huggingface_hub
pycocotools

# ==================== 8. YOLO-World 依赖 ====================
# 注意：mmengine / mmcv / mmdet / mmyolo 必须通过步骤1用 mim 安装
# 此处仅列出不依赖 mim 的包
transformers>=4.36.0
albumentations
